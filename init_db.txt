import os
import sys
from app import app, db

# Ejecutar en contexto de la app
with app.app_context():
    print("ğŸ”„ Creando tablas de base de datos...")
    db.create_all()
    print("âœ… Tablas creadas exitosamente")
    
    # Crear admin si no existe
    from app import Usuario
    if not Usuario.query.filter_by(email='Rodritapia92@gmail.com').first():
        admin = Usuario(
            email='Rodritapia92@gmail.com',
            nombre='Administrador',
            rol='admin'
        )
        admin.set_password('rodritapia924321')
        db.session.add(admin)
        db.session.commit()
        print("âœ… Admin creado: Rodritapia92@gmail.com")
    else:
        print("â„¹ï¸ Admin ya existe")
